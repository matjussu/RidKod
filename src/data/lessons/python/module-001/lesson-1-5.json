{
  "lessonId": "py_les_1_5",
  "moduleId": "py_mod_001",
  "lessonNumber": "5",
  "title": "Quand s'arr√™te une boucle while ?",
  "subtitle": "La boucle de l'incertitude. Elle tourne tant qu'une condition est vraie.",
  "sections": [
    {
      "id": "section_1",
      "type": "text",
      "title": "Le Risque d'Infini",
      "content": "La boucle `while` (tant que) ne compte pas. Elle v√©rifie une condition √† chaque tour.\n\nVotre mission de lecture est critique : **trouvez la ligne qui fait changer la condition.** Si rien ne change la condition, la boucle est **infinie** (le programme plante)."
    },
    {
      "id": "section_2",
      "type": "code_example",
      "language": "python",
      "title": "Exemple : Tentative de Connexion",
      "code": "essais = 0\n\n# On autorise 3 essais max (0, 1, 2)\nwhile essais < 3:\n    print(\"Tentative connexion...\")\n    essais = essais + 1\n\nprint(\"Compte bloqu√©\")",
      "lineExplanations": {
        "1": "üì¶ On initialise un compteur `essais` √† `0`. C'est notre variable de contr√¥le.",
        "3": "üí¨ Commentaire explicatif. On veut 3 essais maximum (0, 1, 2).",
        "4": "üîÑ `while` se lit **\"Tant que\"**. Tant que `essais < 3` est vrai, on continue.",
        "5": "üñ®Ô∏è Affiche une tentative. Cette ligne s'ex√©cute √† chaque tour.",
        "6": "‚ö†Ô∏è **CRUCIAL !** On augmente `essais` de 1. Sans cette ligne, la boucle serait **infinie** !",
        "8": "üõë Quand `essais` atteint 3, la condition `3 < 3` devient **Fausse**. On sort et affiche `\"Compte bloqu√©\"`."
      }
    },
    {
      "id": "section_3",
      "type": "exercise",
      "exerciseId": "py_les_1_5_ex1"
    },
    {
      "id": "section_4",
      "type": "exercise",
      "exerciseId": "py_les_1_5_ex2"
    }
  ],
  "exercises": [
    {
      "id": "py_les_1_5_ex1",
      "type": "predict_output",
      "inputType": "options",
      "question": "Combien de fois le message s'affiche-t-il ?",
      "code": "batterie = 10\nwhile batterie > 0:\n    print(\"Marche\")\n    batterie = batterie - 5",
      "options": [
        "1 fois",
        "2 fois",
        "10 fois",
        "Infiniment"
      ],
      "correctAnswer": 1,
      "explanation": "- Tour 1: batterie 10 (ok), devient 5.\n- Tour 2: batterie 5 (ok), devient 0.\n- Tour 3: batterie 0 (STOP).",
      "highlightedLines": [2, 3, 4],
      "xpGain": 15
    },
    {
      "id": "py_les_1_5_ex2",
      "type": "find_error",
      "inputType": "clickable_lines",
      "question": "Ce code a un bug grave. Clique sur la ligne probl√©matique.",
      "code": "progression = 0\nwhile progression < 100:\n    progression = progression +0\n    print(\"Chargement...\")\n",
      "correctAnswer": 3,
      "explanation": "La variable `progression` reste √† 0 pour l'√©ternit√©. La condition `0 < 100` sera toujours vraie. Il faudrait par exemple `progression = progression + 10` pour avancer vers la sortie.",
      "highlightedLines": [3],
      "xpGain": 15
    }
  ]
}
