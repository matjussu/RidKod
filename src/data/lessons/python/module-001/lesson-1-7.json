{
  "lessonId": "py_les_1_7",
  "moduleId": "py_mod_001",
  "lessonNumber": "7",
  "title": "G√©rer l'erreur (try / except)",
  "subtitle": "Emp√™cher le programme de planter quand l'impr√©vu arrive.",
  "sections": [
    {
      "id": "section_1",
      "type": "text",
      "title": "Le Plan B",
      "content": "Le code est fragile. Une connexion coup√©e, un fichier manquant, et c'est le crash.\n\n`try` / `except` est une protection :\n- **`try` (Essayer) :** Le code normal. Si tout va bien, on ignore le `except`.\n- **`except` (Exception) :** Le plan de secours. Si (et seulement si) une erreur arrive dans le `try`, on saute ici pour g√©rer la crise proprement."
    },
    {
      "id": "section_2",
      "type": "code_example",
      "language": "python",
      "title": "Exemple : Division par Z√©ro",
      "code": "print(\"Calcul...\")\ntry:\n    valeur = 10 / 0  # Impossible !\n    print(\"R√©ussi\")  # Jamais atteint\nexcept:\n    print(\"Erreur math√©matique\")\n\nprint(\"Fin programme\")",
      "lineExplanations": {
        "1": "üñ®Ô∏è Affiche `\"Calcul...\"` avant d'entrer dans la zone prot√©g√©e.",
        "2": "üõ°Ô∏è `try` d√©marre la **zone prot√©g√©e**. Si une erreur arrive ici, on ne crash pas.",
        "3": "üí• **ERREUR !** Division par 0 impossible. L'ex√©cution s'arr√™te imm√©diatement dans le `try`.",
        "4": "üö´ Cette ligne n'est **jamais atteinte** car l'erreur arrive avant. Le `\"R√©ussi\"` ne s'affiche pas.",
        "5": "üÜò `except` = **plan de secours**. On saute ici uniquement si une erreur s'est produite dans le `try`.",
        "6": "üñ®Ô∏è Affiche `\"Erreur math√©matique\"` pour g√©rer la crise proprement.",
        "8": "‚úÖ Le programme **survit** ! Sans `try/except`, il aurait crash√©. Ici il affiche `\"Fin programme\"`."
      }
    },
    {
      "id": "section_3",
      "type": "exercise",
      "exerciseId": "py_les_1_7_ex1"
    },
    {
      "id": "section_4",
      "type": "exercise",
      "exerciseId": "py_les_1_7_ex2"
    }
  ],
  "exercises": [
    {
      "id": "py_les_1_7_ex1",
      "type": "predict_output",
      "inputType": "options",
      "question": "Qu'affiche ce code ?",
      "code": "try:\n    print(\"A\")\nexcept:\n    print(\"B\")\nprint(\"C\")",
      "options": [
        "A\nB\nC",
        "A\nC",
        "B\nC",
        "C"
      ],
      "correctAnswer": 1,
      "explanation": "Il n'y a aucune erreur dans le `try`. Donc le code affiche \"A\", ignore totalement le bloc `except` (le plan B n'est pas n√©cessaire), puis affiche \"C\".",
      "highlightedLines": [2, 5],
      "xpGain": 15
    },
    {
      "id": "py_les_1_7_ex2",
      "type": "find error",
      "inputType": "clickable_lines",
      "question": "Lequel des print va s'afficher ?",
      "code": "status = \"En ligne\"\ntry:\n    x = 1 / 0 \n    status = \"Connect√©\"\n    print(status)\nexcept:\n    status = \"Hors ligne\"\n    print(status)\n",
      "predefinedAnswers": ["En ligne", "Connect√©", "Hors ligne", "Erreur"],
      "correctAnswer": 8,
      "explanation": "L'erreur survient avant que `status` ne devienne \"Connect√©\". On saute dans l'except, o√π `status` devient \"Hors ligne\".",
      "highlightedLines": [4, 7],
      "xpGain": 15
    }
  ]
}
