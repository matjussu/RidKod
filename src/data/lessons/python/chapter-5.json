{
  "chapterId": "py_ch_005",
  "title": "Dictionnaires & Cl√©s",
  "subtitle": "Stocke des donn√©es avec des paires cl√©-valeur",
  "sections": [
    {
      "id": "section_1",
      "type": "text",
      "title": "Qu'est-ce qu'un dictionnaire ?",
      "content": "Un **dictionnaire** est une collection de paires **cl√©-valeur**. C'est comme un vrai dictionnaire : tu cherches un mot (la **cl√©**) pour obtenir sa d√©finition (la **valeur**).\n\nLes dictionnaires sont parfaits pour structurer des donn√©es avec des **labels** !"
    },
    {
      "id": "section_2",
      "type": "code_example",
      "language": "python",
      "code": "# Cr√©er un dictionnaire\npersonne = {\n    \"nom\": \"Alice\",\n    \"age\": 25,\n    \"ville\": \"Paris\"\n}\n\nprint(personne)  # {'nom': 'Alice', 'age': 25, 'ville': 'Paris'}",
      "caption": "Cr√©er un dictionnaire avec des accolades {}",
      "highlight": {
        "style": "info",
        "content": "üí° **Astuce** : Les cl√©s sont g√©n√©ralement des **cha√Ænes**, mais les valeurs peuvent √™tre **n'importe quel type** (int, list, bool, m√™me un autre dict) !"
      }
    },
    {
      "id": "section_3",
      "type": "exercise",
      "exerciseId": "py_ch5_ex1"
    },
    {
      "id": "section_4",
      "type": "text",
      "title": "Acc√©der aux valeurs",
      "content": "Pour acc√©der √† une valeur, tu utilises la **cl√©** entre crochets, comme pour les listes. Mais au lieu d'un index num√©rique, tu donnes le **nom de la cl√©** :"
    },
    {
      "id": "section_5",
      "type": "code_example",
      "language": "python",
      "code": "personne = {\"nom\": \"Bob\", \"age\": 30}\n\nprint(personne[\"nom\"])  # Bob\nprint(personne[\"age\"])  # 30",
      "caption": "Acc√©der aux valeurs par cl√©",
      "highlight": {
        "style": "warning",
        "content": "‚ö†Ô∏è **Attention** : Si tu essaies d'acc√©der √† une cl√© qui n'existe pas (ex: `personne[\"ville\"]`), Python l√®ve une **KeyError** !"
      }
    },
    {
      "id": "section_6",
      "type": "exercise",
      "exerciseId": "py_ch5_ex2"
    },
    {
      "id": "section_7",
      "type": "text",
      "title": "La m√©thode get() (s√©curis√©e)",
      "content": "La m√©thode `get()` est **plus s√ªre** que les crochets `[]`. Si la cl√© n'existe pas, elle renvoie `None` (ou une valeur par d√©faut) au lieu de planter :\n\n‚Ä¢ `dict.get(cle)` : renvoie la valeur ou `None`\n‚Ä¢ `dict.get(cle, defaut)` : renvoie la valeur ou `defaut`"
    },
    {
      "id": "section_8",
      "type": "code_example",
      "language": "python",
      "code": "personne = {\"nom\": \"Claire\", \"age\": 28}\n\n# get() avec cl√© existante\nprint(personne.get(\"nom\"))  # Claire\n\n# get() avec cl√© inexistante\nprint(personne.get(\"ville\"))  # None\n\n# get() avec valeur par d√©faut\nprint(personne.get(\"ville\", \"Inconnue\"))  # Inconnue",
      "caption": "Utiliser get() pour √©viter les erreurs",
      "highlight": {
        "style": "success",
        "content": "‚úÖ **Bonne pratique** : Utilise toujours `get()` quand tu n'es pas s√ªr qu'une cl√© existe. C'est plus robuste que `dict[cle]` !"
      }
    },
    {
      "id": "section_9",
      "type": "exercise",
      "exerciseId": "py_ch5_ex3"
    },
    {
      "id": "section_10",
      "type": "text",
      "title": "Ajouter et modifier des donn√©es",
      "content": "Les dictionnaires sont **mutables** : tu peux ajouter de nouvelles cl√©s ou modifier des valeurs existantes tr√®s facilement :"
    },
    {
      "id": "section_11",
      "type": "code_example",
      "language": "python",
      "code": "personne = {\"nom\": \"David\"}\n\n# Ajouter une nouvelle cl√©\npersonne[\"age\"] = 35\nprint(personne)  # {'nom': 'David', 'age': 35}\n\n# Modifier une valeur existante\npersonne[\"age\"] = 36\nprint(personne)  # {'nom': 'David', 'age': 36}",
      "caption": "Ajouter et modifier des entr√©es",
      "highlight": {
        "style": "info",
        "content": "üí° **Astuce** : Python ne fait **pas de diff√©rence** entre ajouter et modifier. Si la cl√© existe, il modifie ; sinon, il ajoute !"
      }
    },
    {
      "id": "section_12",
      "type": "exercise",
      "exerciseId": "py_ch5_ex4"
    },
    {
      "id": "section_13",
      "type": "text",
      "title": "M√©thodes utiles : keys(), values(), items()",
      "content": "Python propose 3 m√©thodes pour parcourir un dictionnaire :\n\n‚Ä¢ `dict.keys()` : toutes les **cl√©s**\n‚Ä¢ `dict.values()` : toutes les **valeurs**\n‚Ä¢ `dict.items()` : paires **(cl√©, valeur)**"
    },
    {
      "id": "section_14",
      "type": "code_example",
      "language": "python",
      "code": "scores = {\"Alice\": 95, \"Bob\": 87, \"Charlie\": 92}\n\n# Afficher toutes les cl√©s\nprint(scores.keys())  # dict_keys(['Alice', 'Bob', 'Charlie'])\n\n# Afficher toutes les valeurs\nprint(scores.values())  # dict_values([95, 87, 92])\n\n# Parcourir les paires cl√©-valeur\nfor nom, score in scores.items():\n    print(f\"{nom}: {score}\")",
      "caption": "Parcourir un dictionnaire avec keys(), values(), items()",
      "highlight": {
        "style": "success",
        "content": "‚úÖ **Cas d'usage r√©el** : `items()` est super pour afficher des donn√©es structur√©es, comme un tableau de scores ou un menu de restaurant."
      }
    },
    {
      "id": "section_15",
      "type": "text",
      "title": "V√©rifier l'existence d'une cl√© : in",
      "content": "Pour v√©rifier si une **cl√©** existe dans un dictionnaire, utilise l'op√©rateur `in` :\n\n```python\nif \"age\" in personne:\n    print(\"La cl√© 'age' existe\")\n```\n\nCelui-ci renvoie `True` ou `False`."
    },
    {
      "id": "section_16",
      "type": "code_example",
      "language": "python",
      "code": "produit = {\"nom\": \"Laptop\", \"prix\": 999}\n\n# V√©rifier une cl√©\nif \"prix\" in produit:\n    print(f\"Prix : {produit['prix']}‚Ç¨\")\n\nif \"stock\" not in produit:\n    print(\"Stock non d√©fini\")",
      "caption": "V√©rifier l'existence d'une cl√© avec in",
      "highlight": {
        "style": "warning",
        "content": "‚ö†Ô∏è **Attention** : `in` v√©rifie les **cl√©s**, pas les valeurs ! Pour chercher une valeur, utilise `valeur in dict.values()`."
      }
    },
    {
      "id": "section_17",
      "type": "exercise",
      "exerciseId": "py_ch5_ex5"
    },
    {
      "id": "section_18",
      "type": "text",
      "title": "Supprimer des entr√©es : del et pop()",
      "content": "Pour supprimer des paires cl√©-valeur :\n\n‚Ä¢ `del dict[cle]` : supprime la cl√© (erreur si inexistante)\n‚Ä¢ `dict.pop(cle)` : supprime et **retourne** la valeur\n‚Ä¢ `dict.pop(cle, defaut)` : idem, mais renvoie `defaut` si la cl√© n'existe pas"
    },
    {
      "id": "section_19",
      "type": "code_example",
      "language": "python",
      "code": "personne = {\"nom\": \"Eve\", \"age\": 22, \"ville\": \"Lyon\"}\n\n# Supprimer avec del\ndel personne[\"ville\"]\nprint(personne)  # {'nom': 'Eve', 'age': 22}\n\n# Supprimer avec pop() et r√©cup√©rer la valeur\nage = personne.pop(\"age\")\nprint(age)       # 22\nprint(personne)  # {'nom': 'Eve'}",
      "caption": "Supprimer des entr√©es avec del et pop()",
      "highlight": {
        "style": "error",
        "content": "üö® **Pi√®ge courant** : `del` plante si la cl√© n'existe pas. Pr√©f√®re `pop(cle, None)` pour √©viter les erreurs."
      }
    },
    {
      "id": "section_20",
      "type": "exercise",
      "exerciseId": "py_ch5_ex6"
    },
    {
      "id": "section_21",
      "type": "text",
      "title": "R√©capitulatif",
      "content": "üéØ **Ce que tu as appris :**\n\n‚Ä¢ Cr√©er des dictionnaires avec `{cle: valeur}`\n‚Ä¢ Acc√©der aux valeurs avec `dict[cle]` ou `dict.get(cle)`\n‚Ä¢ Ajouter/modifier avec `dict[cle] = valeur`\n‚Ä¢ Parcourir avec `keys()`, `values()`, `items()`\n‚Ä¢ V√©rifier l'existence avec `in`\n‚Ä¢ Supprimer avec `del` ou `pop()`\n\n**Prochaine √©tape :** Tu vas manipuler du texte comme un pro avec les **cha√Ænes de caract√®res** et leurs m√©thodes !"
    }
  ],
  "exercises": [
    {
      "id": "py_ch5_ex1",
      "type": "predict_output",
      "inputType": "options",
      "question": "Que va afficher ce code ?",
      "code": "voiture = {\"marque\": \"Tesla\", \"annee\": 2023}\nprint(voiture[\"marque\"])",
      "options": ["Tesla", "2023", "marque", "Erreur"],
      "correctAnswer": 0,
      "explanation": "On acc√®de √† la valeur associ√©e √† la cl√© `\"marque\"`, qui est **Tesla**.",
      "highlightedLines": [2],
      "xpGain": 10
    },
    {
      "id": "py_ch5_ex2",
      "type": "find_error",
      "inputType": "clickable_lines",
      "question": "Ce code devrait afficher la ville, mais il plante. Quelle ligne contient l'erreur ?",
      "code": "personne = {\"nom\": \"Alice\", \"age\": 30}\nprint(personne[\"ville\"])",
      "correctAnswer": 1,
      "explanation": "Ligne 2 : La cl√© `\"ville\"` n'existe pas dans le dictionnaire. Cela l√®ve une **KeyError**. Il faut utiliser `get()` : `personne.get(\"ville\")`.",
      "highlightedLines": [2],
      "xpGain": 10
    },
    {
      "id": "py_ch5_ex3",
      "type": "predict_output",
      "inputType": "options",
      "question": "Que va afficher ce programme ?",
      "code": "config = {\"theme\": \"dark\", \"lang\": \"fr\"}\nresultat = config.get(\"notifications\", \"activees\")\nprint(resultat)",
      "options": ["None", "activees", "dark", "Erreur"],
      "correctAnswer": 1,
      "explanation": "La cl√© `\"notifications\"` n'existe pas. `get()` renvoie donc la **valeur par d√©faut** fournie : **activees**.",
      "highlightedLines": [2],
      "xpGain": 10
    },
    {
      "id": "py_ch5_ex4",
      "type": "trace_execution",
      "inputType": "free_input",
      "question": "Combien de cl√©s contient le dictionnaire apr√®s ces op√©rations ?",
      "code": "data = {\"x\": 10}\ndata[\"y\"] = 20\ndata[\"z\"] = 30\nprint(len(data))",
      "predefinedAnswers": ["1", "2", "3", "4"],
      "correctAnswer": "3",
      "explanation": "On part de 1 cl√© (`\"x\"`), puis on ajoute `\"y\"` et `\"z\"`. R√©sultat : **3 cl√©s** au total.",
      "highlightedLines": [2, 3],
      "xpGain": 10
    },
    {
      "id": "py_ch5_ex5",
      "type": "predict_output",
      "inputType": "options",
      "question": "Que va afficher ce code ?",
      "code": "stock = {\"pommes\": 50, \"bananes\": 30}\nif \"oranges\" in stock:\n    print(\"En stock\")\nelse:\n    print(\"Rupture\")",
      "options": ["En stock", "Rupture", "True", "None"],
      "correctAnswer": 1,
      "explanation": "La cl√© `\"oranges\"` n'existe pas dans le dictionnaire. La condition `in` renvoie `False`, donc le code affiche **Rupture**.",
      "highlightedLines": [2, 3, 4, 5],
      "xpGain": 10
    },
    {
      "id": "py_ch5_ex6",
      "type": "predict_output",
      "inputType": "free_input",
      "question": "Quelle est la valeur retourn√©e par pop() ?",
      "code": "scores = {\"Alice\": 95, \"Bob\": 87}\nvaleur = scores.pop(\"Bob\")\nprint(valeur)",
      "predefinedAnswers": ["87", "95", "Bob", "None"],
      "correctAnswer": "87",
      "explanation": "`pop(\"Bob\")` supprime la cl√© `\"Bob\"` du dictionnaire et **retourne sa valeur** : **87**.",
      "highlightedLines": [2],
      "xpGain": 10
    }
  ]
}
